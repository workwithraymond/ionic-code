{"version":3,"file":"src_app_pages_tabs_address_edit-address_edit-address_module_ts.js","mappings":"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","sources":["./src/app/pages/tabs/address/edit-address/edit-address-routing.module.ts","./src/app/pages/tabs/address/edit-address/edit-address.module.ts","./src/app/pages/tabs/address/edit-address/edit-address.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { EditAddressPage } from './edit-address.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EditAddressPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class EditAddressPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { EditAddressPageRoutingModule } from './edit-address-routing.module';\n\nimport { EditAddressPage } from './edit-address.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    IonicModule,\n    EditAddressPageRoutingModule\n  ],\n  declarations: [EditAddressPage]\n})\nexport class EditAddressPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { NavController } from '@ionic/angular';\nimport { AddressService } from 'src/app/services/address/address.service';\nimport { GlobalService } from 'src/app/services/global/global.service';\n\n@Component({\n  selector: 'app-edit-address',\n  templateUrl: './edit-address.page.html',\n  styleUrls: ['./edit-address.page.scss'],\n})\nexport class EditAddressPage implements OnInit {\n\n  form: FormGroup;\n  isSubmitted = false;\n  location: any = {};\n  isLocationFetched: boolean;\n  center: any;\n  update: boolean;\n  id: any;\n  isLoading: boolean = false;\n\n  constructor(\n    private navCtrl: NavController,\n    private addressService: AddressService,\n    private global: GlobalService,\n    private route: ActivatedRoute) { }\n\n  ngOnInit() {\n    this.checkForUpdate();\n  }\n\n  checkForUpdate() {\n    this.isLoading = true;\n    this.location.location_name = 'Locating...';\n    this.isLocationFetched = false;\n    this.route.queryParams.subscribe(async(data) => {\n      console.log('data: ', data);\n      if(data?.data) {\n        const address = JSON.parse(data.data);\n        this.center = {\n          lat: address.lat,\n          lng: address.lng\n        };\n        this.update = true;\n        this.location.lat = this.center.lat;\n        this.location.lng = this.center.lng;\n        this.location.address = address.address;\n        this.location.location_name = address.title;\n        this.id = address.id;\n        setTimeout(async() => {\n          await this.initForm(address);\n          this.toggleFetched();\n        }, 3000);\n      } else {\n        this.update = false;\n        this.initForm();\n      }\n    });\n    \n\n  }\n\n  initForm(address?) {\n    let data: any = {\n      title: null,\n      house: null,\n      landmark: null\n    };\n    if(address) {\n      data = {\n        title: address.title,\n        house: address.house,\n        landmark: address.landmark\n      };\n    } \n    this.formData(data);\n  }\n\n  formData(data?) {\n    this.form = new FormGroup({\n      title: new FormControl(data.title, {validators: [Validators.required]}),\n      house: new FormControl(data.house, {validators: [Validators.required]}),\n      landmark: new FormControl(data.landmark, {validators: [Validators.required]}),\n    });\n    this.isLoading = false;\n  }\n\n  fetchLocation(event) {\n    this.location = event;\n    console.log('location: ', this.location);\n    this.isLocationFetched = true;\n  }\n  \n  toggleFetched() {\n    this.isLocationFetched = !this.isLocationFetched;\n  }\n\n  toggleSubmit() {\n    this.isSubmitted = !this.isSubmitted;\n  }\n\n  async onSubmit() {\n    try {\n      this.toggleSubmit();\n      console.log(this.form);\n      if(!this.form.valid || !this.isLocationFetched) {\n        this.toggleSubmit();\n        return;\n      }\n      const data = {\n        title: this.form.value.title,\n        landmark: this.form.value.landmark,\n        house: this.form.value.house,\n        address: this.location.address,\n        lat: this.location.lat,\n        lng: this.location.lng,\n      };\n      console.log('address: ', data);\n      if(!this.id) await this.addressService.addAddress(data);\n      else await this.addressService.updateAddress(this.id, data);\n      this.navCtrl.back();\n      this.toggleSubmit();\n    } catch(e) {\n      console.log(e);\n      this.global.errorToast();\n    }\n\n  }\n\n}\n\n"],"names":["Component","FormControl","FormGroup","Validators","ActivatedRoute","NavController","AddressService","GlobalService","EditAddressPage","constructor","navCtrl","addressService","global","route","ngOnInit","checkForUpdate","isLoading","location","location_name","isLocationFetched","queryParams","subscribe","data","console","log","address","JSON","parse","center","lat","lng","update","title","id","setTimeout","initForm","toggleFetched","house","landmark","formData","form","validators","required","fetchLocation","event","toggleSubmit","isSubmitted","onSubmit","valid","value","addAddress","updateAddress","back","e","errorToast","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}